<section>
  <div class="not-top-radius surface surface--low">
    <p class="intro-link">
      <a mat-button color="primary" routerLink="/explications">Lire l’introduction et les
        définitions</a>
    </p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="grid">
      @if (form.controls.skip.value) {
        <p class="hint">Aucune information ne sera envoyée et tous les champs sont désactivés.</p>
      }


      <fieldset [disabled]="form.controls.skip.value">
        <legend>Dimensions principales (1–9)</legend>
        <div class="emotion-pair">
          <div class="slider-container">
            <img ngSrc="valence.png" width="325" height="60" alt="Représentation de la valence"/>
            <label for="valence-slider">
              Valence <span aria-live="polite">{{ form.value.valence }}</span>
            </label>
            <mat-slider id="valence-slider" [min]="1" [max]="9" [step]="1" discrete showTickMarks>
              <input matSliderThumb formControlName="valence"/>
            </mat-slider>
            <mat-accordion class="defs" displayMode="flat" multi>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>menu_book</mat-icon>&nbsp;Définition
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <strong>{{ definitions.valence.label }}</strong>: {{ definitions.valence.description }}
              </mat-expansion-panel>
            </mat-accordion>
          </div>

          <div class="slider-container">
            <img ngSrc="arousal.png" width="325" height="60" alt="Représentation de l'arousal"/>
            <label for="arousal-slider">
              Arousal <span aria-live="polite">{{ form.value.arousal }}</span>
            </label>
            <mat-slider id="arousal-slider" [min]="1" [max]="9" [step]="1" discrete showTickMarks>
              <input matSliderThumb formControlName="arousal"/>
            </mat-slider>
            <mat-accordion class="defs" displayMode="flat" multi>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>menu_book</mat-icon>&nbsp;Définition
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <strong>{{ definitions.arousal.label }}</strong>: {{ definitions.arousal.description }}
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      </fieldset>

      <fieldset [disabled]="form.controls.skip.value">
        <legend>Émotions (1–5)</legend>
        <div class="emotions">
          <div class="emotion-pair">
            <div class="slider-container">
              <label for="awe-slider">
                Émerveillement <span aria-live="polite">{{ form.value.awe }}</span>
              </label>
              <mat-slider id="awe-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="awe"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.awe.label }}</strong>: {{ definitions.awe.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>

            <div class="slider-container">
              <label for="fear-slider">
                Peur <span aria-live="polite">{{ form.value.fear }}</span>
              </label>
              <mat-slider id="fear-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="fear"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.fear.label }}</strong>: {{ definitions.fear.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>

          <div class="emotion-pair">
            <div class="slider-container">
              <label for="contentment-slider">
                Contentement <span aria-live="polite">{{ form.value.contentment }}</span>
              </label>
              <mat-slider id="contentment-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="contentment"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.contentment.label }}</strong>: {{ definitions.contentment.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>

            <div class="slider-container">
              <label for="anger-slider">
                Colère <span aria-live="polite">{{ form.value.anger }}</span>
              </label>
              <mat-slider id="anger-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="anger"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.anger.label }}</strong>: {{ definitions.anger.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>

          <div class="emotion-pair">
            <div class="slider-container">
              <label for="amusement-slider">
                Amusement <span aria-live="polite">{{ form.value.amusement }}</span>
              </label>
              <mat-slider id="amusement-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="amusement"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.amusement.label }}</strong>: {{ definitions.amusement.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>

            <div class="slider-container">
              <label for="disgust-slider">
                Dégoût <span aria-live="polite">{{ form.value.disgust }}</span>
              </label>
              <mat-slider id="disgust-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="disgust"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.disgust.label }}</strong>: {{ definitions.disgust.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>

          <div class="emotion-pair">
            <div class="slider-container">
              <label for="serenity-slider">
                Sérénité <span aria-live="polite">{{ form.value.serenity }}</span>
              </label>
              <mat-slider id="serenity-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="serenity"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.serenity.label }}</strong>: {{ definitions.serenity.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>

            <div class="slider-container">
              <label for="sadness-slider">
                Tristesse <span aria-live="polite">{{ form.value.sadness }}</span>
              </label>
              <mat-slider id="sadness-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="sadness"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.sadness.label }}</strong>: {{ definitions.sadness.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>

          <div class="emotion-pair">
            <div class="slider-container">
              <label for="excitement-slider">
                Excitation <span aria-live="polite">{{ form.value.excitement }}</span>
              </label>
              <mat-slider id="excitement-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="excitement"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.excitement.label }}</strong>: {{ definitions.excitement.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>

            <div class="slider-container">
              <label for="anxiety-slider">
                Anxiété <span aria-live="polite">{{ form.value.anxiety }}</span>
              </label>
              <mat-slider id="anxiety-slider" [min]="1" [max]="5" [step]="1" discrete showTickMarks>
                <input matSliderThumb formControlName="anxiety"/>
              </mat-slider>
              <mat-accordion class="defs" displayMode="flat" multi>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <mat-icon>menu_book</mat-icon>&nbsp;Définition
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <strong>{{ definitions.anxiety.label }}</strong>: {{ definitions.anxiety.description }}
                </mat-expansion-panel>
              </mat-accordion>
            </div>
          </div>
        </div>
      </fieldset>

      <section class="actions bottom-sticky" aria-label="Actions">
        <div class="left-actions" aria-label="Ignorer le mot">
          <button mat-stroked-button type="button" (click)="skipWord()"
                  [matTooltip]="'Aucune information ne sera envoyée'" matTooltipShowDelay="150"
                  [disabled]="form.controls.skip.value || submitting()">
            Je ne connais pas ce mot
            <mat-icon>info</mat-icon>
          </button>
        </div>

        <button mat-flat-button color="primary" type="submit"
                [disabled]="((form.invalid && !form.controls.skip.value) || submitting())">Suivant
        </button>
      </section>
    </form>
  </div>
</section>
